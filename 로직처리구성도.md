```mermaid
graph TD
    A[사용자 질문] --> B[main_chain 시작]
    B --> C[RAG 체인 구성]
    
    C --> D[movie_graph_search_orchestrator]
    C --> E[질문 그대로 전달]
    
    D --> F[1. Vector Search<br/>유사 영화 검색<br/>Neo4jVector.similarity_search]
    F --> G{영화 제목<br/>발견?}
    
    G -->|No| H[관련 정보 없음 반환]
    G -->|Yes| I[2. Graph Search 1<br/>get_movie_details_and_actors<br/>영화 상세정보 + 배우 조회]
    
    I --> J[배우 ID 수집 및 중복 제거]
    J --> K[3. Graph Search 2<br/>get_actor_filmography<br/>배우들의 다른 작품 조회]
    
    K --> L[4. format_context_for_llm<br/>검색 결과를 텍스트로 포맷팅]
    
    L --> M[Context 생성 완료]
    E --> N[Question 전달 완료]
    
    M --> O[Prompt Template에 주입]
    N --> O
    
    O --> P[ChatGPT-4o-mini<br/>LLM 응답 생성]
    P --> Q[StrOutputParser<br/>문자열 파싱]
    
    Q --> R[최종 답변 반환]
    
    style D fill:#e1f5ff
    style I fill:#fff4e1
    style K fill:#fff4e1
    style P fill:#ffe1f5
    style F fill:#e8f5e9
    style L fill:#f3e5f5
    ```